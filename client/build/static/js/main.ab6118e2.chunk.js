(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{54:function(e,n,t){e.exports=t(76)},59:function(e,n,t){},60:function(e,n,t){},76:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(27),o=t.n(c),i=(t(59),t(60),t(23)),u=t(98),l=t(99),s=t(20),m=t(24),v=t(25);function b(){var e=Object(m.a)(["\n  mutation AddVenue($name: String) {\n    addVenue(name: $name) {\n      name\n      votes\n    }\n  }\n"]);return b=function(){return e},e}function d(){var e=Object(m.a)(["\n  mutation VoteDown($name: String) {\n    voteDown(name: $name) {\n      name\n      votes\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=Object(m.a)(["\n  mutation VoteUp($name: String) {\n    voteUp(name: $name) {\n      name\n      votes\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=Object(m.a)(["\n  subscription {\n    votedUpDown {\n      name\n      votes\n    }\n  }\n"]);return f=function(){return e},e}function E(){var e=Object(m.a)(["\n  subscription {\n    venueAdded {\n      name\n      votes\n    }\n  }\n"]);return E=function(){return e},e}function O(){var e=Object(m.a)(["\n  {\n    venues {\n      name\n      votes\n    }\n  }\n"]);return O=function(){return e},e}var j=Object(v.a)(O()),h=(Object(v.a)(E()),Object(v.a)(f())),g=Object(v.a)(p()),w=Object(v.a)(d()),y=Object(v.a)(b()),V=function(){var e=Object(s.a)(y),n=Object(i.a)(e,2),t=n[0],c=(n[1].data,Object(s.a)(g)),o=Object(i.a)(c,2),m=o[0],v=(o[1],Object(a.useState)("")),b=Object(i.a)(v,2),d=b[0],p=b[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({variables:{name:d}}),p(""),m({variables:{name:d}})}},r.a.createElement(l.a,{placeholder:"Add a venue",name:"name",onChange:function(e){p(e.target.value)},value:d,autoFocus:!0,className:"place-input"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(u.a,{variant:"contained",color:"primary",type:"submit"},"Add this place"))},k=t(94),D=t(100),N=t(95),$=function(e){var n=e.name,t=e.votes,a=(e.subscribeToFreshVotes,Object(s.a)(g)),c=Object(i.a)(a,2),o=c[0],l=(c[1].data,Object(s.a)(w)),m=Object(i.a)(l,2),v=m[0];m[1].data;return r.a.createElement("div",null,r.a.createElement("div",{className:"place-button-title-group"},r.a.createElement(u.a,{onClick:function(){return v({variables:{name:n}})},variant:"outlined",color:"primary"},"\ud83d\udc4eNope"),r.a.createElement(k.a,{variant:"h6"},n),r.a.createElement(u.a,{onClick:function(){return o({variables:{name:n}})},variant:"outlined",color:"primary"},"Yay \ud83d\udc4d")),r.a.createElement(k.a,{variant:"body1"},"Votes: ",t))},A=function(e){var n=e.options,t=void 0===n?[]:n,c=e.subscribeToFreshVotes;return Object(a.useEffect)((function(){c()}),[]),console.log(t),r.a.createElement(N.a,{container:!0,spacing:1},t.sort((function(e,n){return n.votes-e.votes})).map((function(e,n){return r.a.createElement(N.a,{item:!0,xs:8,key:"place-".concat(n)},r.a.createElement(D.a,{className:"venue-item"},r.a.createElement($,Object.assign({},e,{subscribeToFreshVotes:c}))))})))},F=t(101),S=t(96);var T=function(){var e=Object(s.b)(j),n=e.data,t=e.loading,a=e.subscribeToMore;return r.a.createElement("div",{className:"App"},r.a.createElement(F.a,null),r.a.createElement(S.a,{maxWidth:"sm"},r.a.createElement(N.a,{container:!0,spacing:2},r.a.createElement(N.a,{item:!0},r.a.createElement(D.a,{className:"padding-15"},r.a.createElement(k.a,{variant:"h2"},"Lunch Voter!"))),r.a.createElement(N.a,{item:!0,xs:8},r.a.createElement(D.a,{className:"padding-15"},r.a.createElement(V,null)))),r.a.createElement("div",null,!t&&r.a.createElement(A,{options:n.venues,subscribeToFreshVotes:function(){return a({document:h,variables:{},updateQuery:function(e,n){var t=n.subscriptionData;if(!t.data)return e;var a=t.data.votedUpDown;return{venues:e.venues.filter((function(e){return![a].find((function(n){return e.name===n.name}))})).concat(a)}}})}}))))},x=t(16),U=t(22),q=t(13);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=t(8),W=t(26),B=t(48),J=t(3),I=new W.a({uri:"http://localhost:8001/graphql"}),L=new B.a({uri:"ws://localhost:8001/graphql",options:{reconnect:!0}}),M=Object(C.d)((function(e){var n=e.query,t=Object(J.l)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),L,I),Q=new x.a({link:M,cache:new U.a});o.a.render(r.a.createElement(q.a,{client:Q},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[54,1,2]]]);
//# sourceMappingURL=main.ab6118e2.chunk.js.map